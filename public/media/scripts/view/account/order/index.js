require(["zepto","base","mylayer"],function(e,n,t){var o={init:function(){this.initEvent()},copy:function(e){var n=document.createElement("input");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),n.className="oInput",n.style.display="none",document.body.removeChild(n)},initEvent:function(){var n=this;e(document).on("click",".js-cancel-order",function(){var n=e(this).attr("data-id"),o=c.order_cancel_confirm_tip;t.showConfirm(o,function(){t.showLoad(!0);e.ajaxPost("/api/order/cancel",{order_id:n},function(n){t.hideLoad(),"Success"==n.code?t.showMessage(n.message,function(){window.location.reload()}):e.showRequestError(n)},function(n){t.hideLoad(),e.showRequestError(n)})})}),e(document).on("click",".js-search-track",function(o){var i=e(this).attr("data-tracknumber");n.copy(i),t.showTip("已复制物流单号，请粘贴查询"),setTimeout(function(){window.open("http://www.kuaidi100.com/")},1e3)});setInterval(function(){e(".order-expires-timer").each(function(){var n=e(this),t=e(this).attr("data-remaining-time");t>0?(i.timer(this,t),n.show()):n.hide()})},1e3);e(".js-order-detail-back").on("click",function(){var e=document.referrer,n=window.location.hostname;""!=e&&e.indexOf(n)!=-1&&e.indexOf("/pay")==-1&&e.indexOf("/checkout")==-1||(e="/user/orders"),window.location.href=e}),e(document).on("click",".js-order-confirm-receipted",function(){var n=e(this).attr("data-id"),o="确认已收货？";t.showConfirm(o,function(){t.showLoad(!0);e.ajaxPost("/api/order/finished",{order_id:n},function(n){t.hideLoad(),"Success"==n.code?t.showMessage(n.message,function(){window.location.reload()}):e.showRequestError(n)},function(n){t.hideLoad(),e.showRequestError(n)})})})},scrollLoadCallback:function(e,n){}},i={timer:function(n,t){var o=parseInt(t/60/60),i=parseInt(t/60%60),c=parseInt(t%60);o=this.checkTime(o),i=this.checkTime(i),c=this.checkTime(c),e(n).find(".hour").text(o),e(n).find(".minute").text(i),e(n).find(".second").text(c),e(n).find(".second").text(c),e(n).attr("data-remaining-time",t-1>=0?t-1:0)},checkTime:function(e){return e<10&&(e="0"+e),e}},c={order_cancel_confirm_tip:"是否确认取消订单？"};"function"==typeof o.init&&e(function(){o.init()})});