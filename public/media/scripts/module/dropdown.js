define(["zepto"],function(e){var s={};return s.init=function(s){var r=this;String.prototype.startWith=function(e){return!(null==e||""==e||0==this.length||e.length>this.length)&&this.substr(0,e.length)==e},e(".drop-down").on("mouseover",function(s){var r=(e(this),s||window.event),i=e(r.target||r.srcElement);i.hasClass("search-drop-item")&&i.first().addClass("hover").siblings("li").removeClass("hover")}),e(".drop-down").on("mouseout",function(s){var r=(e(this),s||window.event),i=e(r.target||r.srcElement);i.hasClass("search-drop-item")&&i.first().removeClass("hover")}),e(document).on("keyup",".search-input",function(s){var r=e(this).closest(".drop-down"),i=s||window.event,o=e(this),t=i.keyCode||i.which||i.charCode;if(e.inArray(t,[13,40,39,38,37])==-1){var n=r.find(".search-drop-item"),l=e.trim(o.val());if(l){l=l.toLowerCase();var a,d="";n.each(function(){d=e(this).attr("data-text"),a=e(this),"undefined"!=typeof d&&""!=d&&d.toLowerCase().startWith(l)?a.show().addClass("show"):a.hide().removeClass("show")})}else n.show().addClass("show");r.find(".drop-box").show()}}),e("body").on("click",function(s){e(".drop-box").hide()}),e("body").on("keydown",function(s){var i=s||window.event,o=(e(i.target||i.srcElement),r.getCurrentDropBox());if(null!=o&&o.size()>0){var t,n=i.keyCode||i.which||i.charCode,l=o.find(".drop-box-list");switch(n){case 13:var a=l.find("li.hover").first();0==a.size()&&(a=l.find("li.current").first()),a.size()>0&&a.click();break;case 40:var d=l.find("li.show"),h=d.length;if(h>0){var a=l.find("li.current");if(a.size()>0){var c=a.index();if(c<h-1){if(t=a.nextAll("li.show").first(),t.size()>0){var f=l.scrollTop()+t[0].offsetHeight;l.scrollTop(f)}}else t=d.eq(0),l.scrollTop(0)}else t=d.eq(0),l.scrollTop(0);t.size()>0&&t.addClass("current").focus().siblings("li").removeClass("current")}break;case 38:var d=l.find("li.show"),h=d.length;if(h>0){var a=l.find("li.current");if(a.size()>0){var c=a.index();if(c>0&&(t=a.prevAll("li.show").first(),t&&t.size()>0)){var f=l.scrollTop()-t.offsetHeight();l.scrollTop(f)}}else t=d.eq(0),l.scrollTop(0);t.size()>0&&t.addClass("current").focus().siblings("li").removeClass("current")}}}})},s.getCurrentDropBox=function(){var s=null;return e(".drop-box").each(function(){return"none"==e(this).css("display")||void(s=e(this))}),s},s});