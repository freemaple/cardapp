(function(r){"function"===typeof define&&define.amd?define(r):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=r():window.Sortable=r()})(function(){function r(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(a);this.el=a;this.options=b=Y({},b);a[F]=this;var c={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}},e;for(e in c)e in b||(b[e]=c[e]);Z(b);for(var p in this)"_"===p.charAt(0)&&"function"===typeof this[p]&&(this[p]=this[p].bind(this));this.nativeDraggable=b.forceFallback?!1:la;g(a,"mousedown",this._onTapStart);g(a,"touchstart",this._onTapStart);g(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(g(a,"dragover",this),g(a,"dragenter",this));I.push(this._onDragOver);b.store&&this.sort(b.store.get(this))}function O(a,b){"clone"!==a.lastPullMode&&(b=!0);q&&q.state!==b&&(m(q,"display",b?"none":""),!b&&q.state&&(a.options.group.revertClone?(k.insertBefore(q,G),a._animate(d,q)):k.insertBefore(q,d)),q.state=b)}function B(a,b,c){if(a){c=c||n;do if(">*"===b&&a.parentNode===c||aa(a,b))return a;while(a=ma(a))}return null}function ma(a){var b=a.host;return b&&b.nodeType?b:a.parentNode}function g(a,b,c){a.addEventListener(b,c,P)}function f(a,b,c){a.removeEventListener(b,c,P)}function z(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(ba," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(ba," ")}}function m(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return n.defaultView&&n.defaultView.getComputedStyle?c=n.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function ca(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<e;b++)c(a[b],b);return a}return[]}function t(a,b,c,e,p,d,k){a=a||b[F];var l=n.createEvent("Event"),h=a.options,g="on"+c.charAt(0).toUpperCase()+c.substr(1);l.initEvent(c,!0,!0);l.to=b;l.from=p||b;l.item=e||b;l.clone=q;l.oldIndex=d;l.newIndex=k;b.dispatchEvent(l);h[g]&&h[g].call(a,l)}function da(a,b,c,e,d,k,h,l){var p=a[F],g=p.options.onMove,m;var u=n.createEvent("Event");u.initEvent("move",!0,!0);u.to=b;u.from=a;u.dragged=c;u.draggedRect=e;u.related=d||b;u.relatedRect=k||b.getBoundingClientRect();u.willInsertAfter=l;a.dispatchEvent(u);g&&(m=g.call(p,u,h));return m}function ea(a){a.draggable=!1}function na(){Q=!1}function oa(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function K(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"===a.nodeName.toUpperCase()||">*"!==b&&!aa(a,b)||c++;return c}function aa(a,b){if(a){b=b.split(".");var c=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")(?=\\s)","g");return(""===c||a.nodeName.toUpperCase()==c)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length)}return!1}function fa(a,b){var c,e;return function(){void 0===c&&(c=arguments,e=this,setTimeout(function(){1===c.length?a.call(e,c[0]):a.apply(e,c);c=void 0},b))}}function Y(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function ha(a){return ia?ia(a).clone(!0)[0]:R&&R.dom?R.dom(a).cloneNode(!0):a.cloneNode(!0)}function pa(a){a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&S.push(c)}}if("undefined"==typeof window||!window.document)return function(){throw Error("Sortable.js requires a window with a document");};var d,C,h,q,k,G,T,w,U,V,W,L,X,y,v,J,M,D={},E,x,N,ba=/\s+/g,qa=/left|right|inline/,F="Sortable"+(new Date).getTime(),A=window,n=A.document,ja=A.parseInt,ia=A.jQuery||A.Zepto,R=A.Polymer,P=!1,la=!!("draggable"in n.createElement("div")),ka=function(a){if(navigator.userAgent.match(/Trident.*rv[ :]?11\./))return!1;a=n.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),Q=!1,H=Math.abs,ra=Math.min,S=[],I=[],sa=fa(function(a,b,c){if(c&&b.scroll){var e=c[F],d=b.scrollSensitivity,k=b.scrollSpeed,h=a.clientX,l=a.clientY,g=window.innerWidth,m=window.innerHeight,n,u;if(U!==c&&(w=b.scroll,U=c,V=b.scrollFn,!0===w)){w=c;do if(w.offsetWidth<w.scrollWidth||w.offsetHeight<w.scrollHeight)break;while(w=w.parentNode)}if(w){var f=w;b=w.getBoundingClientRect();var q=(H(b.right-h)<=d)-(H(b.left-h)<=d);var r=(H(b.bottom-l)<=d)-(H(b.top-l)<=d)}q||r||(q=(g-h<=d)-(h<=d),r=(m-l<=d)-(l<=d),(q||r)&&(f=A));if(D.vx!==q||D.vy!==r||D.el!==f)D.el=f,D.vx=q,D.vy=r,clearInterval(D.pid),f&&(D.pid=setInterval(function(){u=r?r*k:0;n=q?q*k:0;if("function"===typeof V)return V.call(e,n,u,a);f===A?A.scrollTo(A.pageXOffset+n,A.pageYOffset+u):(f.scrollTop+=u,f.scrollLeft+=n)},24))}},30),Z=function(a){function b(a,b){if(void 0===a||!0===a)a=c.name;return"function"===typeof a?a:function(c,e){c=e.options.group.name;return b?a:a&&(a.join?-1<a.indexOf(c):c==a)}}var c={},e=a.group;e&&"object"==typeof e||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c};r.prototype={constructor:r,_onTapStart:function(a){var b=this,c=this.el,e=this.options,p=e.preventOnFilter,k=a.type,h=a.touches&&a.touches[0],l=(h||a).target,g=a.target.shadowRoot&&a.path&&a.path[0]||l,f=e.filter;pa(c);if(!(d||/mousedown|pointerdown/.test(k)&&0!==a.button||e.disabled)&&(l=B(l,e.draggable,c))&&T!==l){var m=K(l,e.draggable);if("function"===typeof f){if(f.call(this,a,l,this)){t(b,g,"filter",l,c,m);p&&a.preventDefault();return}}else if(f&&(f=f.split(",").some(function(a){if(a=B(g,a.trim(),c))return t(b,a,"filter",l,c,m),!0}))){p&&a.preventDefault();return}e.handle&&!B(g,e.handle,c)||this._prepareDragStart(a,h,l,m)}},_prepareDragStart:function(a,b,c,e){var p=this,h=p.el,f=p.options,l=h.ownerDocument;c&&!d&&c.parentNode===h&&(E=a,k=h,d=c,C=d.parentNode,G=d.nextSibling,T=c,J=f.group,y=e,this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,d.style["will-change"]="transform",c=function(){p._disableDelayedDrag();d.draggable=p.nativeDraggable;z(d,f.chosenClass,!0);p._triggerDragStart(a,b);t(p,k,"choose",d,k,y)},f.ignore.split(",").forEach(function(a){ca(d,a.trim(),ea)}),g(l,"mouseup",p._onDrop),g(l,"touchend",p._onDrop),g(l,"touchcancel",p._onDrop),g(l,"pointercancel",p._onDrop),g(l,"selectstart",p),f.delay?(g(l,"mouseup",p._disableDelayedDrag),g(l,"touchend",p._disableDelayedDrag),g(l,"touchcancel",p._disableDelayedDrag),g(l,"mousemove",p._disableDelayedDrag),g(l,"touchmove",p._disableDelayedDrag),g(l,"pointermove",p._disableDelayedDrag),p._dragStartTimer=setTimeout(c,f.delay)):c())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer);f(a,"mouseup",this._disableDelayedDrag);f(a,"touchend",this._disableDelayedDrag);f(a,"touchcancel",this._disableDelayedDrag);f(a,"mousemove",this._disableDelayedDrag);f(a,"touchmove",this._disableDelayedDrag);f(a,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(a,b){(b=b||("touch"==a.pointerType?a:null))?(E={target:d,clientX:b.clientX,clientY:b.clientY},this._onDragStart(E,"touch")):this.nativeDraggable?(g(d,"dragend",this),g(k,"dragstart",this._onDragStart)):this._onDragStart(E,!0);try{n.selection?setTimeout(function(){n.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(){if(k&&d){var a=this.options;z(d,a.ghostClass,!0);z(d,a.dragClass,!1);r.active=this;t(this,k,"start",d,k,y)}else this._nulling()},_emulateDragOver:function(){if(x&&(this._lastX!==x.clientX||this._lastY!==x.clientY)){this._lastX=x.clientX;this._lastY=x.clientY;ka||m(h,"display","none");var a=n.elementFromPoint(x.clientX,x.clientY),b=a,c=I.length;if(b){do{if(b[F]){for(;c--;)I[c]({clientX:x.clientX,clientY:x.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode)}ka||m(h,"display","")}},_onTouchMove:function(a){if(E){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var d=b.clientX-E.clientX+e.x;e=b.clientY-E.clientY+e.y;d=a.touches?"translate3d("+d+"px,"+e+"px,0)":"translate("+d+"px,"+e+"px)";if(!r.active){if(c&&ra(H(b.clientX-this._lastX),H(b.clientY-this._lastY))<c)return;this._dragStarted()}this._appendGhost();N=!0;x=b;m(h,"webkitTransform",d);m(h,"mozTransform",d);m(h,"msTransform",d);m(h,"transform",d);a.preventDefault()}},_appendGhost:function(){if(!h){var a=d.getBoundingClientRect(),b=m(d),c=this.options;h=d.cloneNode(!0);z(h,c.ghostClass,!1);z(h,c.fallbackClass,!0);z(h,c.dragClass,!0);m(h,"top",a.top-ja(b.marginTop,10));m(h,"left",a.left-ja(b.marginLeft,10));m(h,"width",a.width);m(h,"height",a.height);m(h,"opacity","0.8");m(h,"position","fixed");m(h,"zIndex","100000");m(h,"pointerEvents","none");c.fallbackOnBody&&n.body.appendChild(h)||k.appendChild(h);b=h.getBoundingClientRect();m(h,"width",2*a.width-b.width);m(h,"height",2*a.height-b.height)}},_onDragStart:function(a,b){var c=a.dataTransfer,e=this.options;this._offUpEvents();J.checkPull(this,this,d,a)&&(q=ha(d),q.draggable=!1,q.style["will-change"]="",m(q,"display","none"),z(q,this.options.chosenClass,!1),k.insertBefore(q,d),t(this,k,"clone",d));z(d,e.dragClass,!0);b?("touch"===b?(g(n,"touchmove",this._onTouchMove),g(n,"touchend",this._onDrop),g(n,"touchcancel",this._onDrop),g(n,"pointermove",this._onTouchMove),g(n,"pointerup",this._onDrop)):(g(n,"mousemove",this._onTouchMove),g(n,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(c&&(c.effectAllowed="move",e.setData&&e.setData.call(this,c,d)),g(n,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(a){var b=this.el,c;var e=this.options;var f=e.group;var g=r.active,n=J===f,l=!1,v=e.sort;void 0!==a.preventDefault&&(a.preventDefault(),!e.dragoverBubble&&a.stopPropagation());if(!d.animated&&(N=!0,g&&!e.disabled&&(n?v||(c=!k.contains(d)):M===this||(g.lastPullMode=J.checkPull(this,g,d,a))&&f.checkPut(this,g,d,a))&&(void 0===a.rootEl||a.rootEl===this.el)&&(sa(a,e,this.el),!Q)))if(e=B(a.target,e.draggable,b),f=d.getBoundingClientRect(),M!==this&&(M=this,l=!0),c)O(g,!0),C=k,q||G?k.insertBefore(d,q||G):v||k.appendChild(d);else if(!(c=0===b.children.length||b.children[0]===h)&&(c=b===a.target)&&(c=b.lastElementChild.getBoundingClientRect(),c=5<a.clientY-(c.top+c.height)||5<a.clientX-(c.left+c.width)),c){0!==b.children.length&&b.children[0]!==h&&b===a.target&&(e=b.lastElementChild);if(e){if(e.animated)return;var t=e.getBoundingClientRect()}O(g,n);!1!==da(k,b,d,f,e,t,a)&&(d.contains(b)||(b.appendChild(d),C=b),this._animate(f,d),e&&this._animate(t,e))}else if(e&&!e.animated&&e!==d&&void 0!==e.parentNode[F]){W!==e&&(W=e,L=m(e),X=m(e.parentNode));t=e.getBoundingClientRect();var w=t.right-t.left;c=t.bottom-t.top;var u=qa.test(L.cssFloat+L.display)||"flex"==X.display&&0===X["flex-direction"].indexOf("row");v=e.offsetWidth>d.offsetWidth;var y=e.offsetHeight>d.offsetHeight,z=.5<(u?(a.clientX-t.left)/w:(a.clientY-t.top)/c);w=e.nextElementSibling;var x=!1;u?(l=d.offsetTop,u=e.offsetTop,x=l===u?e.previousElementSibling===d&&!v||z&&v:e.previousElementSibling===d||d.previousElementSibling===e?.5<(a.clientY-t.top)/c:u>l):l||(x=w!==d&&!y||z&&y);a=da(k,b,d,f,e,t,a,x);if(!1!==a){if(1===a||-1===a)x=1===a;Q=!0;setTimeout(na,30);O(g,n);d.contains(b)||(x&&!w?b.appendChild(d):e.parentNode.insertBefore(d,x?w:e));C=d.parentNode;this._animate(f,d);this._animate(t,e)}}},_animate:function(a,b){var c=this.options.animation;if(c){var e=b.getBoundingClientRect();1===a.nodeType&&(a=a.getBoundingClientRect());m(b,"transition","none");m(b,"transform","translate3d("+(a.left-e.left)+"px,"+(a.top-e.top)+"px,0)");b.offsetWidth;m(b,"transition","all "+c+"ms");m(b,"transform","translate3d(0,0,0)");clearTimeout(b.animated);b.animated=setTimeout(function(){m(b,"transition","");m(b,"transform","");b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;f(n,"touchmove",this._onTouchMove);f(n,"pointermove",this._onTouchMove);f(a,"mouseup",this._onDrop);f(a,"touchend",this._onDrop);f(a,"pointerup",this._onDrop);f(a,"touchcancel",this._onDrop);f(a,"pointercancel",this._onDrop);f(a,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;clearInterval(this._loopId);clearInterval(D.pid);clearTimeout(this._dragStartTimer);f(n,"mousemove",this._onTouchMove);this.nativeDraggable&&(f(n,"drop",this),f(b,"dragstart",this._onDragStart));this._offUpEvents();if(a&&(N&&(a.preventDefault(),!c.dropBubble&&a.stopPropagation()),h&&h.parentNode&&h.parentNode.removeChild(h),(k===C||"clone"!==r.active.lastPullMode)&&q&&q.parentNode&&q.parentNode.removeChild(q),d&&(this.nativeDraggable&&f(d,"dragend",this),ea(d),d.style["will-change"]="",z(d,this.options.ghostClass,!1),z(d,this.options.chosenClass,!1),t(this,k,"unchoose",d,k,y),k!==C?(v=K(d,c.draggable),0<=v&&(t(null,C,"add",d,k,y,v),t(this,k,"remove",d,k,y,v),t(null,C,"sort",d,k,y,v),t(this,k,"sort",d,k,y,v))):d.nextSibling!==G&&(v=K(d,c.draggable),0<=v&&(t(this,k,"update",d,k,y,v),t(this,k,"sort",d,k,y,v))),r.active))){if(null==v||-1===v)v=y;t(this,k,"end",d,k,y,v);this.save()}this._nulling()},_nulling:function(){k=d=C=h=G=q=T=w=U=E=x=N=v=W=L=M=J=r.active=null;S.forEach(function(a){a.checked=!0});S.length=0},handleEvent:function(a){switch(a.type){case"drop":case"dragend":this._onDrop(a);break;case"dragover":case"dragenter":d&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.preventDefault());break;case"selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,d=c.length,f=this.options;e<d;e++)b=c[e],B(b,f.draggable,this.el)&&a.push(b.getAttribute(f.dataIdAttr)||oa(b));return a},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,d){d=c.children[d];B(d,this.options.draggable,c)&&(b[a]=d)},this);a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return B(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];c[a]=b;"group"===a&&Z(c)},destroy:function(){var a=this.el;a[F]=null;f(a,"mousedown",this._onTapStart);f(a,"touchstart",this._onTapStart);f(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(f(a,"dragover",this),f(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});I.splice(I.indexOf(this._onDragOver),1);this._onDrop();this.el=a=null}};g(n,"touchmove",function(a){r.active&&a.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){P={capture:!1,passive:!1}}}))}catch(a){}r.utils={on:g,off:f,css:m,find:ca,is:function(a,b){return!!B(a,b,a)},extend:Y,throttle:fa,closest:B,toggleClass:z,clone:ha,index:K};r.create=function(a,b){return new r(a,b)};r.version="1.6.1";return r});