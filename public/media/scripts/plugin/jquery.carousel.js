!function(t){var s=function(s){var i=this;this.caroursel=s,this.posterList=s.find(".poster-list"),this.posterItems=s.find(".poster-item"),this.firstPosterItem=this.posterItems.first(),this.lastPosterItem=this.posterItems.last(),this.prevBtn=this.caroursel.find(".poster-prev-btn"),this.nextBtn=this.caroursel.find(".poster-next-btn"),this.setting={width:"1000",height:"270",posterWidth:"640",posterHeight:"270",scale:"0.8",speed:"1000",isAutoplay:"true",dealy:"1000"},t.extend(this.setting,this.getSetting()),this.setFirstPosition(),this.setSlicePosition(),this.rotateFlag=!0,this.prevBtn.bind("click",function(){i.rotateFlag&&(i.rotateFlag=!1,i.rotateAnimate("left"))}),this.nextBtn.bind("click",function(){i.rotateFlag&&(i.rotateFlag=!1,i.rotateAnimate("right"))}),this.setting.isAutoplay&&(this.autoPlay(),this.caroursel.hover(function(){clearInterval(i.timer)},function(){i.autoPlay()}))};s.prototype={autoPlay:function(){var t=this;this.timer=window.setInterval(function(){t.prevBtn.click()},t.setting.dealy)},rotateAnimate:function(s){var i=this,e=[];"left"==s&&(this.posterItems.each(function(){var s=t(this),h=t(this).next().get(0)?t(this).next():i.firstPosterItem,n=h.css("width"),o=h.css("height"),r=h.css("zIndex"),a=h.css("opacity"),c=h.css("left"),g=h.css("top");e.push(r),s.animate({width:n,height:o,left:c,opacity:a,top:g},i.setting.speed,function(){i.rotateFlag=!0})}),this.posterItems.each(function(s){t(this).css("zIndex",e[s])})),"right"==s&&(this.posterItems.each(function(){var s=t(this),h=t(this).prev().get(0)?t(this).prev():i.lastPosterItem,n=h.css("width"),o=h.css("height"),r=h.css("zIndex"),a=h.css("opacity"),c=h.css("left"),g=h.css("top");e.push(r),s.animate({width:n,height:o,left:c,opacity:a,top:g},i.setting.speed,function(){i.rotateFlag=!0})}),this.posterItems.each(function(s){t(this).css("zIndex",e[s])}))},setFirstPosition:function(){this.caroursel.css({width:this.setting.width,height:this.setting.height}),this.posterList.css({width:this.setting.width,height:this.setting.height});var t=(this.setting.width-this.setting.posterWidth)/2;this.prevBtn.css({width:t,height:this.setting.height,zIndex:Math.ceil(this.posterItems.size()/2)}),this.nextBtn.css({width:t,height:this.setting.height,zIndex:Math.ceil(this.posterItems.size()/2)}),this.firstPosterItem.css({width:this.setting.posterWidth,height:this.setting.posterHeight,left:t,zIndex:Math.ceil(this.posterItems.size()/2),top:this.setVertialType(this.setting.posterHeight)})},setSlicePosition:function(){var s=this,i=this.posterItems.slice(1),e=Math.floor(this.posterItems.length/2),h=i.slice(0,e),n=i.slice(e),o=this.setting.posterWidth,r=this.setting.posterHeight,a=(this.setting.width-this.setting.posterWidth)/2,c=a/e,g=this.setting.width,p=1,l=o,d=r,f=e;h.each(function(i,e){l=o*s.setting.scale,d=r*s.setting.scale,t(this).css({width:l,height:d,left:a-p*c,zIndex:f--,opacity:1/(p+1),top:s.setVertialType(d)}),p++});var u=e,I=1;n.each(function(i,e){var h=o*s.setting.scale,n=r*s.setting.scale;t(this).css({width:h,height:n,left:g-(a-u*c+h),zIndex:I++,opacity:1/(u+1),top:s.setVertialType(n)}),u--})},getSetting:function(){var s=this.caroursel.attr("data-setting");return s.length>0?t.parseJSON(s):{}},setVertialType:function(t){var s=this.setting.algin;return"top"==s?0:"middle"==s?(this.setting.posterHeight-t)/2:"bottom"==s?this.setting.posterHeight-t:(this.setting.posterHeight-t)/2}},s.init=function(i){i.each(function(i,e){new s(t(this))})},window.Caroursel=s}(jQuery);