require(["zepto","base","mylayer","scrollComponent","lazyload"],function(e,t,o,a,s){var n={};n.init=function(){var t=this,o=e(".js-product-scroll-container");a.init(),a.setScrollItem(o),a.setCallback(function(e,o){t.scrollLoadCallback(e,o)}),e(".js-show-self-weixin").on("click",function(){e(".self_weiqin").show()}),e(".js-show-sort").on("click",function(){e(".site-cate-nav").hasClass("sort")?(e(".site-cate-nav").removeClass("sort"),e(".sort-layer").hide()):(e(".site-cate-nav").addClass("sort"),e(".sort-layer").show())}),e(".sort-layer").on("click",function(){e(".site-cate-nav").removeClass("sort"),e(".sort-layer").hide()}),e(".sort-product").on("click",function(){e(".sort-product").removeClass("current"),e(this).addClass("current"),e(".site-cate-nav").removeClass("sort"),e(".sort-layer").hide();var t=o.attr("data-action"),a=e(this).attr("data-sort");t=e.changeURLArg(t,"sort",a),e.ajaxGet(t,{page:"1"},function(a){o.attr("data-action",t),o.attr("data-page","1"),o.removeAttr("data-load-more"),o.removeClass("loading"),o.find(".js-load-block").hide(),o.find(".js-product-list").html(a.view),e.imgLazyLoad()})}),this.homeScreen()},n.homeScreen=function(){if(0==e("#homescreen-template").size())return!1;var t=!0,a=window.sessionStorage.getItem("is_home_screen")||!1;return(t="1"!=a)&&void e.ajaxGet("/api/homescreen",{},function(t){if("Success"==t.code&&t.view){var a=t.view;o.init({content:a,close:!1,class_name:"layer-homescreen-box",callback:function(){}}),navigator.userAgent&&navigator.userAgent.indexOf("Html5Plus")>-1?e.setlocalStorage("is_home_screen","1"):window.sessionStorage.setItem("is_home_screen","1")}})},n.scrollLoadCallback=function(t,o){o.find(".js-product-list").append(t),e.imgLazyLoad()},"function"==typeof n.init&&e(function(){n.init()})});