require(["zepto","base","mylayer"],function(o,t,e){var n={init:function(){var t=this;o(window).on("popstate",function(t){var n=o(".layerbox.show");n.size()>0&&e.hideLayer(n)}),o(document).on("click",".js-bonusToReward",function(){var t=o(".bonus_to_reward_tpwd").val();e.showConfirm("确定转出？",function(){e.showLoad(!0);o.ajaxPost("/api/account/bonusToReward",{transaction_password:t},function(o){e.hideLoad(),"Success"==o.code?(e.showTip(o.message,3e3,"success"),window.location.reload()):""!=o.message&&e.showTip(o.message,3e3,"error")})})}),o(".js-show-bonusToReward").on("click",function(){var n=o("#bonusToReward-template").html();e.init({content:n,close:!1,class_name:"layer-bonusToReward",position:"center",closeEvent:function(){t.deletePushState("link")}}),t.pushState("link","bonusToReward")}),o(document).on("click",".js-goldComtoReward",function(){var t=o(".gold_to_reward_tpwd").val();e.showConfirm("金麦穗价值转出余额，等于减少相应的金麦穗数量，不可再转回参与红利，请慎重考虑！？",function(){e.showLoad(!0);o.ajaxPost("/api/account/goldComtoReward",{transaction_password:t},function(o){e.hideLoad(),"Success"==o.code?(e.showTip(o.message,3e3,"success"),window.location.reload()):""!=o.message&&e.showTip(o.message,3e3,"error")})})}),o(".js-show-goldComtoReward").on("click",function(){var n=o("#goldComtoReward-template").html();e.init({content:n,close:!1,class_name:"layer-goldComtoReward",position:"center",closeEvent:function(){t.deletePushState("link")}}),t.pushState("link","goldComtoReward")}),o(document).on("click",".js-giftComtoGold",function(){var t=o(".giftcom_to_gold_number").val(),n=o(".giftcom_to_gold_tpwd").val();t=parseInt(t)?parseInt(t):"",e.showConfirm("确定置换？",function(){e.showLoad(!0);o.ajaxPost("/api/account/giftComtoGold",{gold_number:t,transaction_password:n},function(o){e.hideLoad(),"Success"==o.code?(e.showTip(o.message,3e3,"success"),window.location.reload()):""!=o.message&&e.showTip(o.message,3e3,"error")})})}),o(".js-show-giftComtoGold").on("click",function(){var n=o("#giftComtoGold-template").html();e.init({content:n,close:!1,class_name:"layer-giftComtoGold",position:"center",closeEvent:function(){t.deletePushState("link")}}),t.pushState("link","giftComtoGold")})},pushState:function(t,e){if(history&&history.pushState){var n=window.location.search;n=o.changeURLArg(n,t,e);var a=window.location.pathname+n+window.location.hash;history.pushState({title:document.title,url:a},document.title,a)}},deletePushState:function(t){if(history&&history.pushState){var e=window.location.search;e=o.delParam(e,t);var n=window.location.pathname+e+window.location.hash;history.pushState({title:document.title,url:n},document.title,n)}}};"function"==typeof n.init&&o(function(){n.init()})});