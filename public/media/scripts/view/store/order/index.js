require(["zepto","base","mylayer"],function(e,o,i){var n={init:function(){this.initEvent()},copy:function(e){var o=document.createElement("input");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("Copy"),o.className="oInput",o.style.display="none",document.body.removeChild(o)},initEvent:function(){var o=this;e(document).on("click",".js-cancel-order",function(){var o=e(this).attr("data-id"),n=t.order_cancel_confirm_tip;i.showConfirm(n,function(){e.ajaxPost("/api/order/cancel",{order_id:o},function(o){"Success"==o.code?i.showMessage(o.message,function(){window.location.reload()}):e.showRequestError(o)},function(o){e.showRequestError(o)})})}),e(document).on("click",".js-search-track",function(){var n=e(this).attr("data-tracknumber");o.copy(n),i.showTip("已复制物流单号，请粘贴查询"),setTimeout(function(){window.open("http://www.kuaidi100.com/")},1e3)}),e(document).on("click",".js-order-confirm-shipped",function(){var o=e(this).attr("data-id"),n=e("#shipped-template").html();i.init({content:n,close:!1,class_name:"layer-shipped",position:"center"}),e(".order-shipped-form").find(".order_id").val(o)}),e(document).on("click",".js-order-shipped",function(){var o=(e(this).attr("data-id"),"确认已发货？"),n=e(".order-shipped-form"),t=n.serializeObject();return""==t.shipping_method?(i.showTip("请输入物流方式"),!1):"同城自提"!=t.shipping_method&&""==t.tracknumber?(i.showTip("请输入物流跟踪号"),!1):void i.showConfirm(o,function(){i.showLoad(!0);e.ajaxPost("/api/store/orderShipped",t,function(o){i.hideLoad(),"Success"==o.code?i.showMessage(o.message,function(){window.location.reload()}):e.showRequestError(o)},function(o){i.hideLoad(),e.showRequestError(o)})})}),e(document).on("change",".js-shipping-select",function(){var o=e(this).val();e(".shipping_method_input").val(o)}),e(document).on("click",".checked_type",function(){if(e(this).is(":checked")){var o=e(this).val();"2"==o?(e(".shipping_method_input_box").show(),e(".shipping_method_select_box").hide()):(e(".shipping_method_select_box").show(),e(".shipping_method_input_box").hide())}e(".checked_type:checked");e(".shipping_method_input").val(shipping_method)})},scrollLoadCallback:function(e,o){}},t={order_cancel_confirm_tip:"是否确认取消订单？"};"function"==typeof n.init&&e(function(){n.init()})});