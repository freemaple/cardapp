!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.uni=n()}(this,function(){"use strict";var e={},n=[],i=function(e,i){if(0===n.length){var t=plus.webview.currentWebview();if(!t)throw new Error("plus.webview.currentWebview() is undefined");var r=t.parent();if(!r)throw new Error("plus.webview.currentWebview().parent() is undefined");n.push(r.id)}var a=JSON.stringify({options:{timestamp:+new Date},name:e,arg:i});plus.webview.getLaunchWebview().evalJS('UniPlusBridge.subscribeHandler("WEB_INVOKE_APPSERVICE",'+a+","+JSON.stringify(n)+");")};e.navigateTo=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).url;i("navigateTo",{url:encodeURI(e)})},e.navigateBack=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).delta;i("navigateBack",{delta:parseInt(e)||1})},e.switchTab=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).url;i("switchTab",{url:encodeURI(e)})},e.reLaunch=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).url;i("reLaunch",{url:encodeURI(e)})},e.redirectTo=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).url;i("redirectTo",{url:encodeURI(e)})},e.getEnv=function(e){e({plus:!0})},e.postMessage=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i("postMessage",e.data||{})};var t={};"undefined"!=typeof wx&&wx.miniProgram&&(t.navigateTo=wx.miniProgram.navigateTo,t.navigateBack=wx.miniProgram.navigateBack,t.switchTab=wx.miniProgram.switchTab,t.reLaunch=wx.miniProgram.reLaunch,t.redirectTo=wx.miniProgram.redirectTo,t.postMessage=wx.miniProgram.postMessage,t.getEnv=wx.miniProgram.getEnv);var r=/uni-app/i.test(navigator.userAgent),a=/micromessenger/i.test(navigator.userAgent),o={},d=function(){window.UniAppJSBridge=!0,document.dispatchEvent(new CustomEvent("UniAppJSBridgeReady",{bubbles:!0,cancelable:!0}))};return r&&(o=e,window.plus&&/complete|loaded|interactive/.test(document.readyState)?d():document.addEventListener("plusready",d)),a&&(o=t,window.WeixinJSBridge&&WeixinJSBridge.invoke?d():document.addEventListener("WeixinJSBridgeReady",d)),o});