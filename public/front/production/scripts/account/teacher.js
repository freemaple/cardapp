require(["jquery","validate","mylayer","tree"],function(e,r,t,o){var a={};a.init=function(){e.validator.addMethod("phone",function(e,r){var t=/^[()+0-9_\-\s]*$/;return this.optional(r)||t.test(e)},e.tran("valid.valid_phone","请输入正确的电话号码")),this.orderEvent(),e.validatorMessageConfig()},a.setForm=function(r,t){var o,a=r.find("[name]");a.each(function(r){o=e.trim(e(this).attr("name")),e(this).hasClass("check")&&(t[o]?e(this).prop("checked","checked"):e(this).removeAttr("checked")),e(this).is("select")?e(this).find('option[value="'+t[o]+'"]').prop("selected","selected"):e(this).val(t[o]?t[o]:"")})},a.orderEvent=function(){e(".update_order_record_status").on("click",function(){var r=e(this),o=e(this).attr("data-id"),a=e(this).attr("data-status"),i={order_record_id:o,status:a};e.postForm(r,"/api/teacher/order/record/updatestatus",i,function(e){"200"==e.code?t.showMessage("success",e.message,function(){window.location.reload()}):t.showMessage("error",e.message)})}),e(".load_course_record_review").on("click",function(){var r=e(this),o=e(this).attr("order-id"),a=e(this).attr("data-id"),i={user_type:"3"};i.order_id=o,i.course_record_id=a,e.postForm(r,"/api/course/order/record/review/load",i,function(r){if("200"==r.code){var o=e(".review_layer").html();t.init({title:"课程评论",content:o,no_remove:!0,class_name:"course_record_review_layer",layerClose:!1,success:function(){e(".review_form").find(".submit_review").hide(),e(".review_form").find(".score_value").val(r.data.score),e(".review_form").find(".content_value").val(r.data.content),r.data.score>5&&(r.data.score=5),e(".score_value").val(r.data.score),e(".score_value_text").text(r.data.score);var t=e(".review_form").find(".score_value_s").width();e(".review_form").find(".review_s_value").width(r.data.score/5*t)}})}else t.showMessage("error",r.message)})})},e(function(){a.init()})});